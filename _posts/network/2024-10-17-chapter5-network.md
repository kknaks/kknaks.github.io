---
title:  5장 네트워크 계층, 목적지를 찾는 단계
date: 2024-10-17 1:35:23 +0900
category: [network]
tags: network, sc기초
permalink: /blog/network05/
---

# 네트워크 계층의 역할
## 1. 라우터
- **라우터** : 데이터가 어떤 경로로 전달되어야 하는 지 내비게이션과 같은 역할을 하는 네트워크 장비
- 라우팅 : 최적경로를 찾는 과정

  ![image](https://github.com/user-attachments/assets/d1d9c8af-7af0-4e0d-a8db-7660b6c1f459)

# IP주소
## 1. IP주소
- **IP(Internet Protocol)주소** : 주소는 인터넷 상에 있는 컴퓨터의 고유한 주소이다. 
- ISP(Internet Service Provider)이 제공하는 공인 IP주소를 사용한다. 
  - 공인IP : ISP가 제공하는 유동적인 IP주소로 고유하게 할당된다.
  - 사설IP : 내부망에 사용되는 아이피 주소로 밖에 네트워크와 통신할 수 없지만, 보안성이 좋다.

## 2. 네트워크주소
- 마지막 1바이트의 값의 0인 주소를 네트워크 주소라고 한다. 
- 같은 네트워크를 주소를 사용하는 컴퓨터들을 같은 IP대역을 사용한다라고 표현한다. 

![image](https://github.com/user-attachments/assets/330a5b93-5bb1-4500-bd6c-f76f31f1181e)

## 3. 브로트캐스트주소
- 마지막 1바이트의 값이 255인 주소를 브로드캐스트 주소라고 한다. 
- **브로드캐스트주소** : 네트워크에 연결된 컴퓨터에 데이터를 한번에 일고라적으로 전송 할때 사용하는 주소이다.

# IP주소의 구조와 클래스 
## 1. IP주소의 구조
- IP의 주소는 다음과 같은 형태이다.
  >192.168.0.14
  - **네트워크 ID** : 라우터에 속한 모든 컴퓨터(네트워크의 범위)를 관리하기 위한 ID 
  - **호스트 ID** : 라우터에 연결된 개별 컴퓨터들을 관리하기 위한 ID

  ![image](https://github.com/user-attachments/assets/3def4cef-6e1b-4811-9b33-4c65768866bd)

## 2. IP주소의 클래스 
- 공인 IP주소는 A~E까지 5개의 클래스가 있으며, D,E클래스는 일반인을 위한 클래스가 아니여서 A,B,C클래스가 유효한 클래스로 간주한다.

### 1) A클래스 
- 첫 8비트의 **첫번째 비트는 0으로 고정**되어 있다. 
- 첫 8비트 까지만 네트워크 ID로 사용하고 나머지 24비트는 호스트ID이다.
- 컴퓨터에 할당할 수 있는 IP주소가 가장 많다.
  > 10진수 : 0.x.x.x ~ 127.x.x.x 범위<br>
  > 2진수 : 0_0000000.x.x.x ~ 0_1111111.x.x.x

### 2) B클래스 
- 첫 8비트의 **첫번째 비트는 0, 두번째 비트는 1로 고정**되어있다.
- 16비트는 네트워크 ID로 사용하고 나머지 16비트는 호스트 ID이다. 
  > 10진수 : 128.x.x.x ~ 191.x.x.x 범위<br>
  > 2진수 : 10_000000.x.x.x ~ 10_111111.x.x.x

### 3) C클래스
- 첫 8비트에서 *1번째 비트는 1, 2번째 비트는 1, 3번째 비트는 0으로 고정**되어 있다. 
- 24비트는 네트워크 ID이고 나머지 8비트는 호스트 ID이다.
- 가장적은 546,870,912개의 IP주소를 할당 할 수 있다.
  > 10진수 : 192.x.x.x ~ 223.x.x.x 범위<br>
  > 2진수 : 110_00000.x.x.x ~ 110_11111.x.x.x

# OSI 7 계층에서의 IP 주소 
- 네트워크 계층에서는 통신을 위한 데이터에 헤더 정보가 추가된다.
- 헤더에서 수신자의 IP정보를 라우터를 통해서 받아온다.
  ![image](https://github.com/user-attachments/assets/63b38a10-e41c-43b7-89ec-766f4175e4c4)

# 브로드캐스트, 유니캐스트, 멀티캐스트
## 1. 브로드캐스트 
- 같은 네트워크에 속한 모든 컴퓨터에게 데이터를 전달한다. 
- 허브의 기능이 비슷하다. 

## 2. 유니캐스트
- 상대방의 MAC주소를 알면 1:1통신을 할 수 있다. 이를 유니캐스트라고 한다.

## 3. 멀티캐스트
- 브로드캐스트와 유니캐스트를 섞어놓은 방식이다. 
- 특정그룹을 지정해서 그 그룹에 해당하는 컴퓨터에게만 데이터를 보내는 방식이다. 

# 서브넷과 서브넷 마스크
## 1. 서브넷의 개념
-**서브넷** : 하나의 네트워크(A클래스, B클래스, C클래스)에 속한 네트워크가 분할된 작은 네트워크
-**서브넷팅** : 하나의 네트워크를 작은 네트워크단위로 나누는 작업

## 2. 서브넷팅의 원리 
- 호스트ID를 서브넷 ID와 호스트 ID로 나누는 작업

  ![image](https://github.com/user-attachments/assets/64b467d4-816b-471c-8eaf-ebbcedc49f74)

## 3. 서브넷마스크
- **서브넷마스크(Subnet Mask)** : IP주소에서 네트워크 ID와 호스트 ID를 구분하기 위한 구분자
  > 서브넷 마스크의 형태 <br>
  > 192.168.1.1.<span style="background-color:#fff5b1">24</span><br>
  > <span style="background-color:#fff5b1"> 255.255.255.0 </span>

- /24 : 24비트까지가 네트워크 ID이며, 마지막 8비트가 호스트ID이다.
- 255.255.255.0 : 이진수로 변환하면 11111111.11111111.11111111.00000000으로 1인 부분은 네트워크 ID 0인 부분은 호스트 ID가 된다.

## 4. 서브넷팅으로 네트워크 나누기
- 다음과 같은 상황이 주어졌다고 가정한다.
  > 네트워크주소 : 172.16.0.0 <br>
  > 서브넷마스크 : 255.255.192.0

- 서브넷 마스크가 192 이므로 4개의 서브넷으로 나눌 수 있다.
  > 마스크1 1111 1111. 1111 1111. 00 00 0000. 0000 0000 / 255.255.000.000 <br>
  > 서브넷1 1010 1100. 0000 1000. 00 00 0000. 0000 0000 / 192.016.000.000<br>
  > 서브넷2 1010 1100. 0000 1000. 01 00 0000. 0000 0000 / 192.016.064.000<br>
  > 서브넷3 1010 1100. 0000 1000. 10 00 0000. 0000 0000 / 192.016.128.000<br>
  > 서브넷4 1010 1100. 0000 1000. 11 00 0000. 0000 0000 / 192.016.192.000<br>

| 구분   | 서브넷              | 네트워크주소        | 브로드캐스트주소        | 호스트 최소        | 호스트 최대          |
|------|------------------|---------------|-----------------|---------------|-----------------|
| 서브넷1 | 172.168.0.0/18   | 172.168.0.0   | 172.168.63.255  | 172.168.0.1   | 172.168.63.254  |
| 서브넷2 | 172.168.64.0/18  | 172.168.64.0  | 172.168.127.255 | 172.168.64.1  | 172.168.127.254 |
| 서브넷3 | 172.168.128.0/18 | 172.168.128.0 | 172.168.191.255 | 172.168.128.1 | 172.168.191.254 |
| 서브넷4 | 172.168.192.0/18 | 172.168.192.0 | 172.168.255.255 | 172.168.192.1 | 172.168.255.254 |


# 라우터의 동작방식
- **라우터** : 데이터 전송을 위해 가장 빠른 길을 찾아 네트워크 간의 경로를 설정하는 네트워크 장비
- **스위치의 한계** : 같은 네트워크 컴퓨터 끼리만 통신이 가능하기 때문에 다른 네트워크간의 통신을 하지 못한다.
- **라우팅** : 라우터가 네트워크간의 경로를 설정하는 방법으로 라우팅 테이블을 활용한다.
- **라우팅 테이블** : 데이터를 목적지까지 보내기 위한 거리와 방법 등을 명시한 테이블 
  > 컴퓨터 A(172.168.1.3)과 컴퓨터 B(172.168.2.12)과 통신 하는 방법<br>
  > 1. 컴퓨터 A가 스위치에 172.168.2.12에 대한 경로를 요청
  > 2. 스위치는 같은 네트워크의 정보만 가지고 있으므로, 라우터 A에게 해당 네트워크 ID(172.168.2.0)를 요청
  > 3. 라우터A는 라이팅 테이블을 확인하여 경로를 확인 (E1)
  > 4. E1 경로로 라우터 B에게 IP를 요청 
  > 5. 라우터B는 스위치B를 통해 컴퓨터 B의 IP를 리턴 















